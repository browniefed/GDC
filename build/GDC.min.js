!function(a){var b=function(){var a;try{Object.create(null),a=Object.create}catch(b){a=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}return a}(),c=function(){try{return Object.defineProperty({},"test",{value:0}),Object.defineProperty}catch(a){return function(a,b,c){a[b]=c.value}}}(),d=function(a){try{try{Object.defineProperties({},{test:{value:0}})}catch(b){throw b}return Object.defineProperties}catch(b){return function(b,c){var d;for(d in c)c.hasOwnProperty(d)&&a(b,d,c[d])}}}(c),e=void 0,f=function(){return function(a,b){var c,d,e=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&(c[c.length]=this.on(d,a[d]));return{cancel:function(){for(;c.length;)c.pop().cancel()}}}return this._subs[a]?this._subs[a].push(b):this._subs[a]=[b],{cancel:function(){e.off(a,b)}}}}(),g=function(){return function(a,b){var c,d;b||(a?this._subs[a]=[]:this._subs={}),c=this._subs[a],c&&(d=c.indexOf(b),-1!==d&&c.splice(d,1))}}(),h=function(){return function(a){var b,c,d,e=this._subs[a];if(e)for(b=Array.prototype.slice.call(arguments,1),c=0,d=e.length;d>c;c+=1)e[c].apply(this,b)}}(),i=function(a,b,c,d){return{hasFocus:a,on:b,off:c,fire:d}}(e,f,g,h),j=function(){var a={};return{addStyle:function(b,c){a[b]=c},removeStyle:function(b){a[b]=null}}}(),k=function(){return{fromRange:function(a,b){return{from:_.clone(a),to:_.clone(b)}},toRange:function(a,b){return{from:_.clone(b),to:_.clone(a)}}}}(),l=function(a){var b,c={},d=!1,e={},f={};return c.name="bold",c.executeStyle=function(g){if(b=this._codemirror.getCodemirror(),g){d=!1;{var h=this._codemirror.getCodemirror().doc.findMarksAt(g.from);this._codemirror.getCodemirror().doc.findMarksAt(g.to)}h.length&&_(h).forEach(function(h){h.className=="gdc-style-"+c.name&&(e=a.fromRange(h.find().from,g.from),f=a.toRange(h.find().to,g.to),h.clear(),b.doc.markText(e.from,e.to,{className:"gdc-style-"+c.name}),b.doc.markText(f.from,f.to,{className:"gdc-style-"+c.name}),d=!0)}),d||this._codemirror.getCodemirror().doc.markText(g.from,g.to,{className:"gdc-style-"+c.name})}},c}(k),m=function(){var a={};return a.name="italic",a.executeStyle=function(b){b&&this._codemirror.getCodemirror().doc.markText(b.from,b.to,{className:"gdc-style-"+a.name})},a}(),n=function(){var a={};return a.name="underline",a.executeStyle=function(b){b&&this._codemirror.getCodemirror().doc.markText(b.from,b.to,{className:"gdc-style-"+a.name})},a}(),o=function(){var a={};return a.name="strikethrough",a.executeStyle=function(b){b&&this._codemirror.getCodemirror().doc.markText(b.from,b.to,{className:"gdc-style-"+a.name})},a}(),p=function(a,b,c,d,e){var f={bold:b,italic:c,underline:d,strikethrough:e},g={},h=!1,i={};return g.applyStyle=function(b){return(h=this._codemirror.getCodemirror().somethingSelected())?(i.from=this._codemirror.getCodemirror().doc.getCursor(!0),i.to=this._codemirror.getCodemirror().doc.getCursor(!1),f[b].executeStyle.call(this,i),void 0):(a.addStyle(b,f[b]),void 0)},g}(j,l,m,n,o),q=function(){return[]}(),r=function(){var a=function(a){this.codemirror=a};return a.prototype.getCodemirror=function(){return this._codemirror},a.prototype.getSelection=function(){},a.prototype.fromTextArea=function(a){this._codemirror=this.codemirror.fromTextArea(a)},a}(),s=function(a,b,c){return function(d,e){b(d,{_subs:{value:{}}}),d._codemirror=new a(e.codemirror),d._codemirror.fromTextArea(e.el),d.on("bold",function(){c.applyStyle.call(d,"bold",{})}),d.on("italic",function(){c.applyStyle.call(d,"italic",{})}),d.on("strikethrough",function(){c.applyStyle.call(d,"strikethrough",{})}),d.on("underline",function(){c.applyStyle.call(d,"underline",{})})}}(r,d,p),t=function(a,b,c,d,e,f){var g=function(a,b){f(this,{codemirror:a,el:b})};return b(g,{prototype:{value:c},_subs:{value:{}}}),g.prototype.constructor=g,e.GDC=g,g}(b,d,i,p,q,s),u=function(a,b){for(;b.length;)b.pop()();return a}(t,q);"undefined"!=typeof module&&module.exports?module.exports=u:"function"==typeof define&&define.amd?define(function(){return u}):(console.log("global"),a.GDC=u)}("undefined"!=typeof window?window:this);